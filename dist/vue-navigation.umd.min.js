/**
* vue-navigation v1.1.2
* https://github.com/zack24q/vue-navigation
* Released under the MIT License.
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("lodash/isEqual")):"function"==typeof define&&define.amd?define(["lodash/isEqual"],t):e.VueNavigation=t(e.isEqual)}(this,function(e){"use strict";function t(){return"xxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function n(e,t){return(e.name||e.path)+"?"+e.query[t]}function o(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:!!isRegExp(e)&&e.test(t)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e="default"in e?e.default:e;var r=[];window.sessionStorage.VUE_NAVIGATION&&(r=JSON.parse(window.sessionStorage.VUE_NAVIGATION));var a=r,s=function(e,t,o,i){t&&t.registerModule(o,{state:{routes:a},mutations:{"navigation/FORWARD":function(e,t){t.to,t.from;var n=t.name;e.routes.push(n)},"navigation/BACK":function(e,t){t.to,t.from;var n=t.count;e.routes.splice(e.routes.length-n,n)},"navigation/REPLACE":function(e,t){t.to,t.from;var n=t.name;e.routes.splice(a.length-1,1,n)},"navigation/REFRESH":function(e,t){t.to,t.from},"navigation/RESET":function(e){e.routes.splice(0,e.routes.length)}}});var r=function(n,i,r){var s={route:i},u={route:r},c=t?t.state[o].routes:a;u.name=c[c.length-1]||null,s.name=n,t?t.commit("navigation/FORWARD",{to:s,from:u,name:n}):c.push(n),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(c),e.$emit("forward",s,u)},s=function(n,i,r){var s={route:i},u={route:r},c=t?t.state[o].routes:a;u.name=c[c.length-1],s.name=c[c.length-1-n],t?t.commit("navigation/BACK",{to:s,from:u,count:n}):c.splice(a.length-n,n),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(c),e.$emit("back",s,u)},u=function(n,i,r){var s={route:i},u={route:r},c=t?t.state[o].routes:a;u.name=c[c.length-1]||null,s.name=n,t?t.commit("navigation/REPLACE",{to:s,from:u,name:n}):c.splice(a.length-1,1,n),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(c),e.$emit("replace",s,u)},c=function(n,i){var r={route:n},s={route:i},u=t?t.state[o].routes:a;r.name=s.name=u[u.length-1],t&&t.commit("navigation/REFRESH",{to:r,from:s}),e.$emit("refresh",r,s)};return{record:function(e,t,o){var f=n(e,i);if(o)u(f,e,t);else{var l=a.lastIndexOf(f);-1===l?r(f,e,t):l===a.length-1?c(e,t):s(a.length-1-l,e,t)}},reset:function(){t?t.commit("navigation/RESET"):a.splice(0,a.length),window.sessionStorage.VUE_NAVIGATION=JSON.stringify([]),e.$emit("reset")}}},u=function(e){return{name:"navigation",abstract:!0,props:{},data:function(){return{routes:a}},computed:{},watch:{routes:function(e){for(var t in this.cache)if(!o(e,t)){var n=this.cache[t];n&&n.componentInstance.$destroy(),delete this.cache[t]}}},created:function(){this.cache={}},destroyed:function(){for(var e in this.cache){var t=this.cache[e];t&&t.componentInstance.$destroy()}},render:function(){var t=this.$slots.default?this.$slots.default[0]:null;if(t){t.key=t.key||(t.isComment?"comment":t.tag);var o=n(this.$route,e);-1===t.key.indexOf(o)&&(t.key="__navigation-"+o+"-"+t.key),this.cache[o]?t.key===this.cache[o].key?t.componentInstance=this.cache[o].componentInstance:(this.cache[o].componentInstance.$destroy(),this.cache[o]=t):this.cache[o]=t,t.data.keepAlive=!0}return t}}},c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};return{install:function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.router,f=o.store,l=o.moduleName,h=void 0===l?"navigation":l,m=o.keyName,g=void 0===m?"VNK":m;if(r){var v=new n,d=s(v,f,h,g),p=r.replace.bind(r),y=!1;r.replace=function(e,t,n){y=!0,p(e,t,n)},r.beforeEach(function(n,o,r){if(n.query[g])r();else{var a=c({},n.query);n.path===o.path&&e(c({},n.query,i({},g,null)),c({},o.query,i({},g,null)))&&o.query[g]?a[g]=o.query[g]:a[g]=t(),r({path:n.path,query:a,replace:y||!o.query[g]})}}),r.afterEach(function(e,t){d.record(e,t,y),y=!1}),n.component("navigation",u(g)),n.navigation=n.prototype.$navigation={on:function(e,t){v.$on(e,t)},once:function(e,t){v.$once(e,t)},off:function(e,t){v.$off(e,t)},getRoutes:function(){return a.slice()},cleanRoutes:function(){return d.reset()}}}else console.error("vue-navigation need options: router")}}});